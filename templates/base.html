{% load static %}
{% load custom_filters %}


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dairy Farming ERP </title>

    <!-- CSS -->
    {% comment %} <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">  {% endcomment %}
    <link rel="stylesheet" href="{% static 'plugins/roboto/Roboto-Thin.tff' %}">
    <link rel="stylesheet" href="{% static 'plugins/fontawesome-free/css/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/datatables-bs4/css/dataTables.bootstrap4.min.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/datatables-responsive/css/responsive.bootstrap4.min.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/datatables-buttons/css/buttons.bootstrap4.min.css' %}">
    {% comment %} <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"> {% endcomment %}
    <link rel="stylesheet" href="{% static 'plugins/ionicons/css/ionicons.min.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/icheck-bootstrap/icheck-bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/jqvmap/jqvmap.min.css' %}">
    <link rel="stylesheet" href="{% static 'dist/css/adminlte.min.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/overlayScrollbars/css/OverlayScrollbars.min.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/daterangepicker/daterangepicker.css' %}">
    <link rel="stylesheet" href="{% static 'plugins/summernote/summernote-bs4.min.css' %}">
    <!-- Toastr and SweetAlert CSS -->
    <link rel="stylesheet" href="{% static 'plugins/toastr/toastr.min.css' %}">

    <style>
      .notification-text {
        white-space: normal;
        overflow-wrap: break-word;
        word-wrap: break-word;
    }

    .dropdown-item {
        color: inherit;
    }

    .dropdown-item:focus, .dropdown-item:active {
        background-color: transparent !important;
        color: inherit;
        outline: none;
    }
  </style>

  <script src="{% static 'plugins/jquery/jquery.min.js' %}"></script> 
  <script src="{% static 'plugins/jquery-ui/jquery-ui.min.js' %}"></script>

 <!-- Other scripts -->
 <script src="{% static 'plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
 <script src="{% static 'plugins/chart.js/Chart.min.js' %}"></script>
 <script src="{% static 'plugins/sparklines/sparkline.js' %}"></script>
 <script src="{% static 'plugins/jqvmap/jquery.vmap.min.js' %}"></script>
 <script src="{% static 'plugins/jqvmap/maps/jquery.vmap.usa.js' %}"></script>
 <script src="{% static 'plugins/jquery-knob/jquery.knob.min.js' %}"></script>
 <script src="{% static 'plugins/daterangepicker/daterangepicker.js' %}"></script>
 <script src="{% static 'plugins/summernote/summernote-bs4.min.js' %}"></script>
 <script src="{% static 'plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js' %}"></script>
 <script src="{% static 'dist/js/adminlte.js' %}"></script>
{% comment %} <script src="{% static 'plugins/moment/moment.min.js%' %}"></script>
<script src="{% static 'plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js' %}"></script>
<script src="{% static 'dist/js/pages/dashboard.js' %}"></script> {% endcomment %}
 <!-- DataTables -->
 <script src="{% static 'plugins/datatables/jquery.dataTables.min.js' %}"></script>
 <script src="{% static 'plugins/datatables-bs4/js/dataTables.bootstrap4.min.js' %}"></script>
 <script src="{% static 'plugins/datatables-responsive/js/dataTables.responsive.min.js' %}"></script>
 <script src="{% static 'plugins/datatables-responsive/js/responsive.bootstrap4.min.js' %}"></script>
 <script src="{% static 'plugins/datatables-buttons/js/dataTables.buttons.min.js' %}"></script>
 <script src="{% static 'plugins/datatables-buttons/js/buttons.bootstrap4.min.js' %}"></script>
 <script src="{% static 'plugins/jszip/jszip.min.js' %}"></script>
 <script src="{% static 'plugins/pdfmake/pdfmake.min.js' %}"></script>
 <script src="{% static 'plugins/pdfmake/vfs_fonts.js' %}"></script>
 <script src="{% static 'plugins/datatables-buttons/js/buttons.html5.min.js' %}"></script>
 <script src="{% static 'plugins/datatables-buttons/js/buttons.print.min.js' %}"></script>
 <script src="{% static 'plugins/datatables-buttons/js/buttons.colVis.min.js' %}"></script>
 <!-- Toastr and SweetAlert -->
 <script src="{% static 'plugins/toastr/toastr.min.js' %}"></script>
  
</head>
<body class="hold-transition sidebar-mini layout-fixed">
<div class="wrapper">

  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="" role="button"><i class="fas fa-bars"></i></a>
      </li>
      {% if request.user|has_permission:"erp.view_admindashboard" %} 
      <li class="nav-item d-none d-sm-inline-block">
        <a href="../../farm" class="nav-link">Farm</a>
      </li>
      {% endif %} 
    </ul>

    <ul class="navbar-nav ml-auto">
      <!-- Navbar Search -->
      {% comment %} <li class="nav-item">
        <a class="nav-link" data-widget="navbar-search" href="" role="button">
          <i class="fas fa-search"></i>
        </a>
        <div class="navbar-search-block">
          <form class="form-inline">
            <div class="input-group input-group-sm">
              <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
              <div class="input-group-append">
                <button class="btn btn-navbar" type="submit">
                  <i class="fas fa-search"></i>
                </button>
                <button class="btn btn-navbar" type="button" data-widget="navbar-search">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </form>
        </div>
      </li> {% endcomment %}

      <li class="nav-item dropdown">
        <a class="nav-link" data-toggle="dropdown" href="">
            <i class="far fa-bell"></i>
            <span class="badge badge-warning navbar-badge">{{ total_notifications }}</span>
        </a>
        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
            <span class="dropdown-item dropdown-header">{{ total_notifications }} Notifications</span>
            <div class="dropdown-divider"></div>
    
            {% if request.user|has_permission:"erp.view_admindashboard" %}
                {% if notifications.vaccination_notifications %}
                    <a href="../../cattle_has_vaccine" class="dropdown-item">
                        <i class="fas fa-exclamation-circle mr-2"></i> 
                        <span class="notification-text">You have {{ vaccination_notification_count }} cattles scheduled for vaccination.</span>
                        <span class="float-right text-muted text-sm">Vaccine Schedule</span>
                    </a>
                    <div class="dropdown-divider"></div>
                {% endif %}
            {% endif %}
            
            {% if request.user|has_permission:"erp.view_storeclerkdashboard" or request.user|has_permission:"erp.view_admindashboard" %}
                {% if notifications.low_quantity_items %}
                    <a href="../../stock" class="dropdown-item">
                        <i class="fas fa-exclamation-triangle mr-2"></i> 
                        <span class="notification-text">You have {{ low_quantity_count }} items with low stock.</span>
                        <span class="float-right text-muted text-sm">Low Stock</span>
                    </a>
                    <div class="dropdown-divider"></div>
                {% endif %}
            {% endif %}
    
            {% if request.user|has_permission:"erp.view_laboremployeedashboard" %}
                {% if notifications.assigned_tasks %}
                    <a href="../../assign_task" class="dropdown-item">
                        <i class="fas fa-tasks mr-2"></i> 
                        <span class="notification-text">You have {{ assigned_tasks_count }} assigned tasks pending.</span>
                        <span class="float-right text-muted text-sm">Pending Tasks</span>
                    </a>
                    <div class="dropdown-divider"></div>
                {% endif %}

                {% if notifications.rejected_tasks %}
                    <a href="../../assign_task" class="dropdown-item">
                        <i class="fas fa-tasks mr-2"></i> 
                        <span class="notification-text">You have {{ rejected_tasks_count }} rejected tasks.</span>
                        <span class="float-right text-muted text-sm">Rejected Tasks</span>
                    </a>
                    <div class="dropdown-divider"></div>
                {% endif %}
            {% endif %}
    
            {% if request.user|has_permission:"erp.view_admindashboard" %}
                {% if notifications.approval_required_orders %}
                    <a href="../../request_order" class="dropdown-item">
                        <i class="fas fa-clipboard-check mr-2"></i> 
                        <span class="notification-text">You have {{ approval_required_orders_count }} orders pending approval.</span>
                        <span class="float-right text-muted text-sm">Pending Approval</span>
                    </a>
                    <div class="dropdown-divider"></div>
                {% endif %}
    
                {% if notifications.approval_required_ordersuppliers %}
                    <a href="../../../../request_order" class="dropdown-item">
                        <i class="fas fa-truck mr-2"></i> 
                        <span class="notification-text">You have {{ approval_required_ordersuppliers_count }} supplier orders pending approval.</span>
                        <span class="float-right text-muted text-sm">Pending Approval</span>
                    </a>
                    <div class="dropdown-divider"></div>
                {% endif %}
    
                {% if notifications.approval_required_leave_requests %}
                    <a href="../../leave" class="dropdown-item">
                        <i class="fas fa-user-clock mr-2"></i> 
                        <span class="notification-text">You have {{ approval_required_leave_requests_count }} leave requests pending approval.</span>
                        <span class="float-right text-muted text-sm">Pending Approval</span>
                    </a>
                    <div class="dropdown-divider"></div>
                {% endif %}
    
                {% if notifications.approval_required_stockout_requests %}
                    <a href="../../stock_out" class="dropdown-item">
                        <i class="fas fa-warehouse mr-2"></i> 
                        <span class="notification-text">You have {{ approval_required_stockout_requests_count }} stock-out requests pending approval.</span>
                        <span class="float-right text-muted text-sm">Pending Approval</span>
                    </a>
                    <div class="dropdown-divider"></div>
                {% endif %}
    
                {% if notifications.approval_required_stockin_requests %}
                    <a href="../../stock_in" class="dropdown-item">
                        <i class="fas fa-boxes mr-2"></i> 
                        <span class="notification-text">You have {{ approval_required_stockin_requests_count }} stock-in requests pending approval.</span>
                        <span class="float-right text-muted text-sm">Pending Approval</span>
                    </a>
                    <div class="dropdown-divider"></div>
                {% endif %}

                {% if notifications.completed_tasks %}
                    <a href="../../assign_task" class="dropdown-item">
                        <i class="fas fa-clipboard-check mr-2"></i> 
                        <span class="notification-text">You have {{ completed_tasks_count }} completed tasks.</span>
                        <span class="float-right text-muted text-sm">Completed Tasks</span>
                    </a>
                    <div class="dropdown-divider"></div>
                {% endif %}
            {% endif %}
        </div>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../../logout">
          <i class="fas fa-sign-out-alt"></i> Logout
        </a>
      </li>
    </ul>
  </nav>

 
<style>
    .main-sidebar {
      background-color: #1a2421 ;
      color: #fff  !important;
  }
  .sidebar .nav-item > a.active {
      background-color: #007f5c !important; 
      color: #FFFFFF !important;           
  }

  .sidebar .nav-treeview > .nav-item > a.active {
      background-color: #F0F0F0 !important; 
      color: #000000 !important;          
  }

  .sidebar .nav-treeview > .nav-item > a:hover {
      background-color: #D8D8D8; 
      color: #000000;           
  }

  .brand-link {
    background-color: transparent !important; 
    color: inherit; 
}

.brand-link .brand-text {
    color: #FFFFFF; 
}

  .breadcrumb-item a{
    color:#007f5c;
  }
  </style>   


  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <a href="" class="brand-link">

      {% if latest_farm %}
          <img src="{{ latest_farm.logo_url }}" alt="Farm Logo" class="brand-image img-circle elevation-3">
      {% else %}
          <img src="{% static 'dist/img/cattle4.jpg' %}" alt="Default Logo" class="brand-image img-circle elevation-3">
      {% endif %}
    
      <span class="brand-text font-weight-light">
        {% if latest_farm %}
          {{ latest_farm.nick_name }}
        {% else %}
          <span class="brand-text font-weight-light">BiloFarm</span>
        {% endif %}
      </span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <div class="user-panel mt-3 pb-3 mb-3 d-flex">
        <div class="image">
          <img src="{% static 'dist/img/avatar4.png' %}" class="img-circle elevation-2" alt="User Image">
        </div>
        <div class="info">
          <a href="../../profile" class="d-block">{{request.user}}</a>
          {% if request.user.groups.all %}
              <p class="d-block">
                {% for group in request.user.groups.all %}
                    {{ group.name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
              </p>
          {% endif %}
        </div>
      </div>

      <!-- SidebarSearch Form -->
      <div class="form-inline">
        <div class="input-group" data-widget="sidebar-search">
          <input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
          <div class="input-group-append">
            <button class="btn btn-sidebar">
              <i class="fas fa-search fa-fw"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <li class="nav-item menu-open active">
            <a href="../../index" class="nav-link">
              <i class="nav-icon fas fa-tachometer-alt"></i>
              <p>
                Dashboard
              </p>
            </a>
          </li>

          {% if request.user|has_permission:"erp.view_cattle" or request.user|has_permission:"erp.view_cattlehealthcheckup" or request.user|has_permission:"erp.view_cattlehasvaccine" or request.user|has_permission:"erp.view_cattlepregnancy" or request.user|has_permission:"erp.view_feedformulation" or request.user|has_permission:"erp.view_feedingredient" or request.user|has_permission:"erp.view_cattlehasfeed" or request.user|has_permission:"erp.view_milkproduction" %}
          <li class="nav-header">Livestock Operations</li> 
          <li class="nav-item">
            {% if request.user|has_permission:"erp.view_cattle" or request.user|has_permission:"erp.view_cattlehealthcheckup" or request.user|has_permission:"erp.view_cattlehasvaccine" or request.user|has_permission:"erp.view_cattlepregnancy" %}
              <a href="#" class="nav-link">
                <i class="nav-icon fas fa-horse"></i>
                <p>
                  Cattle Management
                  <i class="fas fa-angle-left right"></i>
                </p>
              </a>
              <ul class="nav nav-treeview pl-3">
                {% if request.user|has_permission:"erp.view_cattle" %}
                <li class="nav-item">
                  <a href="../../cattle" class="nav-link">
                    <i class="nav-icon fas fa-table"></i>
                    <p>Basic Information</p>
                  </a>
                </li>
                {% endif %}
                
                {% if request.user|has_permission:"erp.view_cattlehealthcheckup" %}
                <li class="nav-item">
                  <a href="../../cattle_health_checkup" class="nav-link">
                    <i class="fas fa-hospital nav-icon"></i>
                    <p>Cattle Health</p>
                  </a>
                </li>
                {% endif %}
                
                {% if request.user|has_permission:"erp.view_cattlehasvaccine" %}
                <li class="nav-item">
                  <a href="../../cattle_has_vaccine" class="nav-link">
                    <i class="fas fa-syringe nav-icon"></i>
                    <p>Vaccination</p>
                  </a>
                </li>
                {% endif %}
                
                {% if request.user|has_permission:"erp.view_cattlepregnancy" %}
                <li class="nav-item">
                  <a href="../../cattle_pregnancy" class="nav-link">
                    <i class="nav-icon fas fa-horse"></i>
                    <p>Reproduction</p>
                  </a>
                </li>
                {% endif %}
              </ul>
            {% endif %}
          </li>
          
          <li class="nav-item">
            {% if request.user|has_permission:"erp.view_feedformulation" or request.user|has_permission:"erp.view_feedingredient" or request.user|has_permission:"erp.view_cattlehasfeed" %}
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-seedling"></i>
              <p>
                Feed Management
                <i class="fas fa-angle-left right"></i>
              </p>
            </a> 
            <ul class="nav nav-treeview pl-3">
              {% if request.user|has_permission:"erp.view_feedformulation" %}
              <li class="nav-item">
                <a href="../../feed_formulation" class="nav-link">
                  <i class="nav-icon fas fa-seedling"></i>
                  <p>
                    Feed Formulation
                  </p>
                </a>
              </li>
              {% endif %} 
              {% if request.user|has_permission:"erp.view_cattlehasfeed" %}
              <li class="nav-item">
                <a href="../../cattle_has_feed" class="nav-link">
                  <i class="nav-icon fas fa-utensils"></i>
                  <p>
                    Cattle Feed
                  </p>
                </a>
              </li>
              {% endif %} 
            </ul>
            {% endif %} 
          </li>

          <li class="nav-item">
            {% if request.user|has_permission:"erp.view_milkproduction" %}
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-warehouse"></i>
              <p>
                Production Mang't
                <i class="fas fa-angle-left right"></i>
              </p>
            </a> 
            <ul class="nav nav-treeview pl-3">
              {% if request.user|has_permission:"erp.view_milkproduction" %}
              <li class="nav-item">
                <a href="../../milk_production" class="nav-link">
                  <i class="nav-icon fas fa-warehouse"></i>
                  <p>
                    Milk Production </p>
                </a>
              </li>
              {% endif %} 
            </ul>
            {% endif %}
          </li>
        {% endif %}

        {% if request.user|has_permission:"erp.view_supplier" or request.user|has_permission:"erp.view_order" %}
          <li class="nav-header">Business Operations</li>
          <li class="nav-item">
            {% if request.user|has_permission:"erp.view_supplier" or request.user|has_permission:"erp.view_order"%}
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-coins"></i>
              <p>
                Procurement Mang't
                <i class="fas fa-angle-left right"></i>
              </p>
            </a> 
            <ul class="nav nav-treeview pl-3">
              {% if request.user|has_permission:"erp.view_supplier" %}
              <li class="nav-item">
                <a href="../../supplier" class="nav-link">
                  <i class="nav-icon fas fa-user-tie"></i>
                  <p>
                    Manage Supplier
                  </p>
                </a>
              </li> 
              {% endif %}
              {% if request.user|has_permission:"erp.view_order" %}
              <li class="nav-item">
                <a href="../../request_order" class="nav-link">
                  <i class="nav-icon fas fa-question"></i>
                  <p>
                    Manage Order Request
                  </p>
                </a>
              </li>
              {% endif %}
              {% if request.user|has_permission:"erp.view_order" %}
              <li class="nav-item">
                <a href="../../purchase_order" class="nav-link">
                  <i class="nav-icon fas fa-coins"></i>
                  <p>
                    Manage Purchase Order
                  </p>
                </a>
              </li>
              {% endif %}
            </ul>
            {% endif %}
          </li>

          <li class="nav-item">
            {% if request.user|has_permission:"erp.view_customer" or request.user|has_permission:"erp.view_salesorder" %}
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-lightbulb"></i>
              <p>
                Sales Management
                <i class="fas fa-angle-left right"></i>
              </p>
            </a> 
          
            <ul class="nav nav-treeview pl-3">
              {% if request.user|has_permission:"erp.view_customer" %}
              <li class="nav-item">
                <a href="../../customer" class="nav-link">
                  <i class="nav-icon fas fa-user-alt"></i>
                  <p>
                    Manage Customer
                  </p>
                </a>
              </li>
              {% endif %}
              {% if request.user|has_permission:"erp.view_salesorder" %}
              <li class="nav-item">
                <a href="../../sales_order" class="nav-link">
                  <i class="nav-icon fas fa-lightbulb"></i>
                  <p>
                    Manage Sales
                  </p>
                </a>
              </li>
              {% endif %} 
            </ul>
            {% endif %}
          </li>
        {% endif %}

        {% if request.user|has_permission:"erp.view_department" or request.user|has_permission:"erp.view_employee" or request.user|has_permission:"erp.view_shift" or request.user|has_permission:"erp.view_taskassignment" or request.user|has_permission:"erp.view_employeeleave" or request.user|has_permission:"erp.view_stock" or request.user|has_permission:"erp.view_directlyaddeditem" or request.user|has_permission:"erp.view_stockout"%}
          <li class="nav-header">Resource Management</li>
          <li class="nav-item">
            {% if request.user|has_permission:"erp.view_department" or request.user|has_permission:"erp.view_employee" or request.user|has_permission:"erp.view_shift" or request.user|has_permission:"erp.view_taskassignment" or request.user|has_permission:"erp.view_employeeleave" %}
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-users"></i>
              <p>
                Human Resource
                <i class="fas fa-angle-left right"></i>
              </p>
            </a> 
       
            <ul class="nav nav-treeview pl-3">
              {% if request.user|has_permission:"erp.view_department" %}
              <li class="nav-item">
                <a href="../../department" class="nav-link">
                  <i class="nav-icon fas fa-building"></i>
                  <p>
                    Manage Department
                  </p>
                </a>
              </li>
              {% endif %}
              {% if request.user|has_permission:"erp.view_employee" %}
              <li class="nav-item">
                <a href="../../employee" class="nav-link">
                  <i class="nav-icon fas fa-table"></i>
                  <p>
                    Basic Employee Info
                  </p>
                </a>
              </li>
              {% endif %}
              {% if request.user|has_permission:"erp.view_shift" %}
              <li class="nav-item">
                <a href="../../shift" class="nav-link">
                  <i class="nav-icon fas fa-layer-group"></i>
                  <p>Manage Shift</p>
                </a>
              </li>
              {% endif %}
              {% if request.user|has_permission:"erp.view_taskassignment" %}
              <li class="nav-item">
                <a href="../../assign_task" class="nav-link">
                  <i class="nav-icon fas fa-briefcase"></i>
                  <p>Task Assignment</p>
                </a>
              </li>
              {% endif %}
              {% if request.user|has_permission:"erp.view_employeeleave" %}
              <li class="nav-item">
                <a href="../../leave" class="nav-link">
                  <i class="nav-icon fas fa-arrow-right"></i>
                  <p>Leave Management</p>
                </a>
              </li> 
              {% endif %}   
            </ul>
            {% endif %}  
          </li>

          <li class="nav-item">
            {% if request.user|has_permission:"erp.view_stock" or request.user|has_permission:"erp.view_directlyaddeditem" or request.user|has_permission:"erp.view_stockout" %}
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-archive"></i>
              <p>
                Stock Management
                <i class="fas fa-angle-left right"></i>
              </p>
            </a> 
            <ul class="nav nav-treeview pl-3">
              {% if request.user|has_permission:"erp.view_stock" %}
              <li class="nav-item">
                <a href="../../stock" class="nav-link">
                  <i class="nav-icon fas fa-store"></i>
                  <p>Manage Stock</p>
                </a>
              </li>
              {% endif %}
              {% if request.user|has_permission:"erp.view_directlyaddeditem" %}
              <li class="nav-item">
                <a href="../../stock_in" class="nav-link">
                  <i class="nav-icon fas fa-store"></i>
                  <p>Stock In</p>
                </a>
              </li>
              {% endif %}
              {% if request.user|has_permission:"erp.view_stockout" %}
              <li class="nav-item">
                <a href="../../stock_out" class="nav-link">
                  <i class="nav-icon fas fa-store-slash"></i>
                  <p>Stock Out</p>
                </a>
              </li>
              {% endif %}
            </ul>
            {% endif %}
          </li>
        {% endif %}

        {% if request.user|has_permission:"erp.view_transaction" or request.user|has_permission:"erp.view_reports" %}
            <li class="nav-item">
              <a href="#" class="nav-link">
                <i class="nav-icon fas fa-dollar-sign"></i>
                <p>Finance Management</p>
                  <i class="fas fa-angle-left right"></i>
              </a>
              <ul class="nav nav-treeview pl-3">
                {% if request.user|has_permission:"erp.view_transaction" %}
                <li class="nav-item">
                  <a href="../../transaction" class="nav-link">
                    <i class="nav-icon fas fa-table"></i>
                    <p>
                      Transactions
                    </p>
                  </a>
                </li>
                {% endif %}

                {% if request.user|has_permission:"erp.view_reports" %}
                <li class="nav-item">
                  <a href="../../balance_sheet" class="nav-link">
                    <i class="nav-icon fas fa-table"></i>
                    <p>
                      Balance Sheet
                    </p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="../../profit_loss" class="nav-link">
                    <i class="nav-icon fas fa-table"></i>
                    <p>
                      PL Statement
                    </p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="../../account_receivables" class="nav-link">
                    <i class="nav-icon fas fa-table"></i>
                    <p>
                      Account Receivables
                    </p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="../../account_payables" class="nav-link">
                    <i class="nav-icon fas fa-table"></i>
                    <p>
                      Account Payables
                    </p>
                  </a>
                </li>
                {% endif %}
              </ul>
            </li>
        {% endif %}
          
        {% if request.user|has_permission:"erp.view_reports" %}
            <li class="nav-header">Report & Analytics</li>
            <li class="nav-item">
              <a href="../../reports/" class="nav-link">
                <i class="fas fa-poll nav-icon"></i>
                <p>Reports
                </p>
              </a>
            </li>
        {% endif %}

            {% if request.user|has_permission:"erp.view_cattlebreed" or request.user|has_permission:"erp.view_cattlestatus" or request.user|has_permission:"erp.view_pregnancystatus" or request.user|has_permission:"erp.view_vaccine" or request.user|has_permission:"erp.view_medicine" or request.user|has_permission:"erp.view_currentmilkprice" or request.user|has_permission:"erp.view_persontype" or request.user|has_permission:"erp.view_persontitle" or request.user|has_permission:"erp.view_contacttype" or request.user|has_permission:"erp.view_region" or request.user|has_permission:"erp.view_guaranteetype"  or request.user|has_permission:"erp.view_job" or request.user|has_permission:"erp.view_task" or request.user|has_permission:"erp.view_suppliertype" or request.user|has_permission:"erp.view_itemtype" or request.user|has_permission:"erp.view_item" or request.user|has_permission:"erp.view_itemmeasurement" or request.user|has_permission:"erp.view_saletype" or request.user|has_permission:"auth.view_changepassword" %}
            <li class="nav-header">Settings
            {% if request.user|has_permission:"auth.view_user"  %} 
            <li class="nav-item">
              <a href="#" class="nav-link">
                <i class="nav-icon fas fa-user"></i>
                <p>
                  User Management
                  <i class="fas fa-angle-left right"></i>
                </p>
              </a> 
              <ul class="nav nav-treeview">
                <li class="nav-item">
                  <a href="../../user" class="nav-link">
                    <i class="far fa-circle nav-icon"></i>
                    <p>Users</p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="../../group" class="nav-link">
                    <i class="far fa-circle nav-icon"></i>
                    <p>Roles</p>
                  </a>
                </li>
              </ul>
            </li>
            {% endif %}

            <li class="nav-item">
              {% if request.user|has_permission:"erp.view_cattlebreed" or request.user|has_permission:"erp.view_cattlestatus" or request.user|has_permission:"erp.view_pregnancystatus" or request.user|has_permission:"erp.view_vaccine" or request.user|has_permission:"erp.view_medicine" or request.user|has_permission:"erp.view_persontype" or request.user|has_permission:"erp.view_persontitle" or request.user|has_permission:"erp.view_contacttype" or request.user|has_permission:"erp.view_region" or request.user|has_permission:"erp.view_guaranteetype"  or request.user|has_permission:"erp.view_job" or request.user|has_permission:"erp.view_task" or request.user|has_permission:"erp.view_suppliertype" or request.user|has_permission:"erp.view_itemtype" or request.user|has_permission:"erp.view_item" or request.user|has_permission:"erp.view_itemmeasurement" or request.user|has_permission:"erp.view_saletype" or request.user|has_permission:"erp.view_paymentmethod" %}
              <a href="#" class="nav-link">
                <i class="nav-icon fas fa-archive"></i>
                <p>
                  Manage Datas
                  <i class="fas fa-angle-left right"></i>
                </p>
              </a> 
              {% endif %}
              <ul class="nav nav-treeview">
                <li class="nav-item">
                  {% if request.user|has_permission:"erp.view_cattlebreed" or request.user|has_permission:"erp.view_cattlestatus" or request.user|has_permission:"erp.view_pregnancystatus" or request.user|has_permission:"erp.view_vaccine" or request.user|has_permission:"erp.view_medicine" or request.user|has_permission:"erp.view_currentmilkprice" %}
                  <a href="#" class="nav-link">
                    <i class="far fa-circle nav-icon"></i>
                    <p>Cattle datas
                      <i class="fas fa-angle-left right"></i>
                    </p>
                  </a>
                    <ul class="nav nav-treeview pl-3">
                      {% if request.user|has_permission:"erp.view_cattlebreed" %}
                      <li class="nav-item">
                        <a href="../../cattle_breed" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Cattle Breed</p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_cattlestatus" %}
                      <li class="nav-item"> 
                        <a href="../../cattle_status" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Cattle Status</p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_pregnancystatus" %}
                      <li class="nav-item"> 
                        <a href="../../pregnancy_status" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Pregnancy Status</p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_vaccine" %}
                      <li class="nav-item"> 
                        <a href="../../vaccine" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Vaccine</p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_medicine" %}
                      <li class="nav-item"> 
                        <a href="../../medicine" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Medicine</p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_currentmilkprice" %}
                      <li class="nav-item"> 
                        <a href="../../current_milk_price" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Current Milk Price</p>
                        </a>
                      </li>
                      {% endif %}
                    </ul>
                    {% endif %}
                </li>
                
                <li class="nav-item">
                  {% if request.user|has_permission:"erp.view_persontype" or request.user|has_permission:"erp.view_persontitle" or request.user|has_permission:"erp.view_contacttype" or request.user|has_permission:"erp.view_region" or request.user|has_permission:"erp.view_guaranteetype"  or request.user|has_permission:"erp.view_job" or request.user|has_permission:"erp.view_task" %}
                  <a href="#" class="nav-link">
                    <i class="far fa-circle nav-icon"></i>
                    <p>Employee datas
                      <i class="fas fa-angle-left right"></i>
                    </p>
                  </a>
                    <ul class="nav nav-treeview pl-3">
                      {% if request.user|has_permission:"erp.view_persontype" %}
                      <li class="nav-item">
                        <a href="../../person_type" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Person Type</p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_persontitle" %}
                      <li class="nav-item">
                        <a href="../../person_title" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Person Title</p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_contacttype" %}
                      <li class="nav-item">
                        <a href="../../contact_type" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Contact Type</p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_region" %}
                      <li class="nav-item">
                        <a href="../../region" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Region</p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_guaranteetype" %}
                      <li class="nav-item">
                        <a href="../../guarantee_type" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Guarantee Type</p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_job" %}
                      <li class="nav-item">
                        <a href="../../job" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Job</p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_task" %}
                      <li class="nav-item">
                        <a href="../../task" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Task</p>
                        </a>
                      </li>
                      {% endif %}
                    </ul>
                    {% endif %}
                </li>

                <li class="nav-item">
                  {% if request.user|has_permission:"erp.view_suppliertype" or request.user|has_permission:"erp.view_itemtype" or request.user|has_permission:"erp.view_item" or request.user|has_permission:"erp.view_itemmeasurement" %}
                  <a href="#" class="nav-link">
                    <i class="far fa-circle nav-icon"></i>
                    <p>Procurement datas
                      <i class="fas fa-angle-left right"></i>
                    </p>
                  </a>
                    <ul class="nav nav-treeview pl-3">
                      {% if request.user|has_permission:"erp.view_suppliertype" %}
                      <li class="nav-item">
                        <a href="../../supplier_type" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Supplier Type</p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_itemtype" %}
                      <li class="nav-item">
                        <a href="../../item_type" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Item Type</p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_item" %}
                      <li class="nav-item">
                        <a href="../../item" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>
                            Item
                          </p>
                        </a>
                      </li>
                      {% endif %}
                      {% if request.user|has_permission:"erp.view_itemmeasurement" %}
                      <li class="nav-item">
                        <a href="../../item_measurement" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>
                            Item Measurement
                          </p>
                        </a>
                      </li>
                      {% endif %}
                    </ul>
                    {% endif %}
                </li>

                <li class="nav-item">
                  {% if request.user|has_permission:"erp.view_saletype" or request.user|has_permission:"erp.view_paymentmethod"%}
                  <a href="#" class="nav-link">
                    <i class="far fa-circle nav-icon"></i>
                    <p>Sales datas
                      <i class="fas fa-angle-left right"></i>
                    </p>
                  </a>
                    <ul class="nav nav-treeview pl-3">
                      {% if request.user|has_permission:"erp.view_paymentmethod" %}
                      <li class="nav-item">
                        <a href="../../payment_method" class="nav-link">
                          <i class="far fa-circle nav-icon"></i>
                          <p>Payment Method</p>
                        </a>
                      </li>
                      {% endif %}
                    </ul>
                </li>
                {% endif %}
              </ul>
            </li>
            {% endif %}
            <li class="nav-item">
              <a href="../../change_password" class="nav-link">
                <i class="fas fa-lock nav-icon"></i>
                <p>Change Password</p>
              </a>
            </li>

          </li>
        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

  
  <div class="wrapper">
    {% block content %}
    
    {% endblock %}
  </div>

  <footer class="main-footer">
    <strong>Copyright &copy; 2024 <a href="">BiloFarm</a>.</strong> All rights reserved.
  </footer>


  <aside class="control-sidebar control-sidebar-dark">
  </aside>

</div>

<script>
  $.widget.bridge('uibutton', $.ui.button)
 </script>

 <script>
  var url = window.location;

  // Main sidebar items
  $('ul.nav-sidebar a').filter(function() {
      return this.href == url;
  }).addClass('active').css({
      'background-color': '#007f5c', 
      'color': '#FFFFFF'            
  });

  // Treeview items
  $('ul.nav-treeview a').filter(function() {
      return this.href == url;
  }).css({
      'background-color': '#F0F0F0', 
      'color': '#000000'             
  }).parentsUntil(".nav-sidebar > .nav-treeview")
    .addClass('menu-open')
    .prev('a')
    .addClass('active')
    .css({
      'background-color': '#007f5c', 
      'color': '#FFFFFF'             
  });
  
 </script>

 <script>
  $(function () {
    $('#example1').DataTable({
      "paging": true,
      "lengthChange": false,
      "searching": true,
      "ordering": true,
      "info": true,
      "autoWidth": false,
      "responsive": true,
    });
  });
</script>

</body>
</html>
